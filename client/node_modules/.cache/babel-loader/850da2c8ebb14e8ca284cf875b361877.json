{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/ryanj/Documents/GitHub/Group-14-VR-Enviroment-Project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/ryanj/Documents/GitHub/Group-14-VR-Enviroment-Project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/ryanj/Documents/GitHub/Group-14-VR-Enviroment-Project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import'./login.css';import'../common/style/global.css';import{UserCheck}from'react-feather';import axios from'axios';import{Container,Row,Col,Form,Button}from'react-bootstrap';import Navigation from'../common/navbar/navbar.js';import Footer from'../common/footer/footer.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Login(){var _useState=useState(undefined),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var getValues=function getValues(event){return{username:event.currentTarget.elements.username.value,password:event.currentTarget.elements.password.value};};function handleSubmit(_x){return _handleSubmit.apply(this,arguments);}function _handleSubmit(){_handleSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var credentials;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getValues(event);case 2:credentials=_context.sent;axios({method:\"POST\",url:\"/login/auth\",data:credentials}).then(function(response){if(response.status===200){document.cookie=\"Bearer=\".concat(response.data.access_token);window.location='/support';}}).catch(function(error){if(error.response.status!==undefined){if(error.response.status===401){setError(\"You have entered an incorrect password\");}else if(error.response.status===404){setError(\"Username could not be found\");}else if(error.response.status===422){setError(\"You have not entered a username and/or password\");};};});event.preventDefault();case 5:case\"end\":return _context.stop();}}},_callee);}));return _handleSubmit.apply(this,arguments);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navigation,{}),/*#__PURE__*/_jsx(\"section\",{className:\"login\",children:/*#__PURE__*/_jsx(Container,{className:\"h-100 d-flex align-items-center justify-content-center\",children:/*#__PURE__*/_jsx(Row,{className:\"login-row\",children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsxs(Form,{\"data-aos\":\"fade-down\",className:\"form-box\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(UserCheck,{className:\"icon mx-auto d-flex justify-content-center\",size:100}),/*#__PURE__*/_jsx(\"h3\",{className:\"header-text text-center\",children:\"login\"}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Username\"}),/*#__PURE__*/_jsx(Form.Control,{className:\"rounded\",type:\"username\",id:\"username\",placeholder:\"Username\"})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Password\"}),/*#__PURE__*/_jsx(Form.Control,{className:\"rounded\",type:\"password\",id:\"password\",placeholder:\"Password\"})]}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{children:error!==undefined?/*#__PURE__*/_jsx(\"p\",{className:\"error text-center\",children:error}):/*#__PURE__*/_jsx(_Fragment,{})})}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{className:\"d-flex justify-content-center\",children:/*#__PURE__*/_jsx(Button,{className:\"btn button btn-outline-grey\",type:\"submit\",children:\"Login\"})})}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{children:error===\"Username could not be found\"?/*#__PURE__*/_jsxs(\"p\",{className:\"text-center\",\"data-aos\":\"fade-in\",children:[\"Don't have an account? \",/*#__PURE__*/_jsx(\"a\",{className:\"d-flex justify-content-center\",href:\"/\",children:\"Register\"})]}):/*#__PURE__*/_jsx(_Fragment,{})})})]})})})})}),/*#__PURE__*/_jsx(Footer,{})]});}export default Login;","map":{"version":3,"sources":["C:/Users/ryanj/Documents/GitHub/Group-14-VR-Enviroment-Project/client/src/routes/login/login.js"],"names":["React","useState","UserCheck","axios","Container","Row","Col","Form","Button","Navigation","Footer","Login","undefined","error","setError","getValues","event","username","currentTarget","elements","value","password","handleSubmit","credentials","method","url","data","then","response","status","document","cookie","access_token","window","location","catch","preventDefault"],"mappings":"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","sourcesContent":["import React, {useState} from 'react';\r\nimport './login.css';\r\nimport '../common/style/global.css';\r\nimport {UserCheck} from 'react-feather';\r\nimport axios from 'axios';\r\nimport {Container, Row, Col, Form, Button} from 'react-bootstrap';\r\nimport Navigation from '../common/navbar/navbar.js';\r\nimport Footer from '../common/footer/footer.js';\r\n\r\nfunction Login() {\r\n\r\n    const [error, setError] = useState(undefined);\r\n\r\n    const getValues = (event) =>{\r\n        return {username:  event.currentTarget.elements.username.value, password:  event.currentTarget.elements.password.value} \r\n    }\r\n\r\n    async function handleSubmit(event){\r\n\r\n        const credentials = await getValues(event)\r\n\r\n        axios({\r\n            method: \"POST\",\r\n            url: \"/login/auth\",\r\n            data: credentials\r\n        })\r\n        .then((response) =>{\r\n            if(response.status === 200){\r\n                document.cookie = `Bearer=${response.data.access_token}`\r\n                window.location = '/support'\r\n            }\r\n        })\r\n        .catch((error) =>{\r\n            if(error.response.status !== undefined){\r\n                if(error.response.status === 401){\r\n                    setError(\"You have entered an incorrect password\")\r\n                }\r\n                else if(error.response.status === 404){\r\n                    setError(\"Username could not be found\")\r\n                }\r\n                else if(error.response.status === 422){\r\n                    setError(\"You have not entered a username and/or password\")\r\n                };\r\n            };\r\n        });\r\n        event.preventDefault();\r\n    };\r\n\r\n    return (\r\n        <>  \r\n            <Navigation></Navigation>\r\n            <section className = \"login\">\r\n                <Container className = \"h-100 d-flex align-items-center justify-content-center\">\r\n                    <Row className = \"login-row\">\r\n                        <Col>\r\n                            <Form data-aos = \"fade-down\" className = \"form-box\" onSubmit = {handleSubmit}>\r\n                                <UserCheck className = \"icon mx-auto d-flex justify-content-center\" size = {100}></UserCheck>\r\n                                <h3 className = \"header-text text-center\">login</h3>\r\n                                <Form.Group>\r\n                                    <Form.Label>Username</Form.Label>\r\n                                    <Form.Control className = \"rounded\" type = \"username\" id = \"username\" placeholder = \"Username\"></Form.Control>\r\n                                </Form.Group>\r\n                                <Form.Group>\r\n                                    <Form.Label>Password</Form.Label>\r\n                                    <Form.Control className = \"rounded\" type = \"password\" id = \"password\" placeholder = \"Password\"></Form.Control>\r\n                                </Form.Group>\r\n                                <Row>\r\n                                    <Col>\r\n                                        {(error !== undefined) ? (<p className = \"error text-center\">{error}</p>) : <></>}\r\n                                    </Col>\r\n                                </Row>\r\n                                <Row>\r\n                                    <Col className = \"d-flex justify-content-center\">\r\n                                        <Button className = \"btn button btn-outline-grey\" type = \"submit\">Login</Button>\r\n                                    </Col>\r\n                                </Row>\r\n                                <Row>\r\n                                    <Col>\r\n                                        {(error === \"Username could not be found\") ? (<p className = \"text-center\" data-aos = \"fade-in\">Don't have an account? <a className = \"d-flex justify-content-center\" href=\"/\">Register</a></p>) : <></>}\r\n                                    </Col>\r\n                                </Row>\r\n                            </Form>\r\n                        </Col>\r\n                    </Row>\r\n                </Container>\r\n            </section>\r\n            <Footer></Footer>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Login\r\n"]},"metadata":{},"sourceType":"module"}